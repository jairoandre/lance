<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:c="http://java.sun.com/jsp/jstl/core">
<h:body>
  <h:form id="menuForm">
    <p:growl id="messages" showDetail="true" showSummary="true"
             autoUpdate="true" globalOnly="true"/>
    <p:menubar rendered="#{request.getUserPrincipal() != null}" toggleEvent="click">
      <p:menuitem action="/pages/index.xhtml?faces-redirect=true">
        <h:graphicImage library="img" name="favicon.png" height="15"/>
      </p:menuitem>
      <c:if test="#{request.isUserInRole('ADMINISTRATOR')}">
        <p:menuitem value="Usuários"
                    action="/admin/user/list.xhtml?faces-redirect=true" ajax="false"
                    icon="ui-icon-person"/>
      </c:if>
      <c:if test="#{request.isUserInRole('ADMINISTRATOR') || request.isUserInRole('MANAGER')}">
        <p:submenu label="Cadastro" icon="ui-icon-document">
          <p:menuitem value="Clientes"
                      action="/pages/client/list.xhtml?faces-redirect=true"/>
          <p:menuitem value="Serviços"
                      action="/pages/service/list.xhtml?faces-redirect=true"/>
          <p:menuitem value="Contratos"
                      action="/pages/contract/list.xhtml?faces-redirect=true"/>
        </p:submenu>
      </c:if>
      <c:if test="#{request.isUserInRole('ADMINISTRATOR') || request.isUserInRole('MANAGER')}">
        <p:menuitem value="Lançamentos"
                    action="/pages/entry/list.xhtml?faces-redirect=true"
                    icon="ui-icon-flag"/>
      </c:if>
      <f:facet name="options">
        <h:panelGroup style="margin-top: 3px;" layout="block">
          <h:outputText value="Olá, #{loginController.username}     "
                        rendered="#{request.getUserPrincipal() != null}"/>
          <p:commandButton value="Logout" action="#{loginController.logout}"
                           icon="fa fa-sign-out"
                           rendered="#{request.getUserPrincipal() != null}"/>
        </h:panelGroup>
      </f:facet>
    </p:menubar>
  </h:form>
</h:body>
</html>
