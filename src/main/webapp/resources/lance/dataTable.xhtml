<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:composite="http://java.sun.com/jsf/composite"
	xmlns:p="http://primefaces.org/ui">

<composite:interface>
	<composite:attribute name="id" />
	<composite:attribute name="controller" />
	<composite:attribute name="renderAddBtn" />
	<composite:attribute name="renderDetailAction" />
	<composite:attribute name="renderEditAction" />
	<composite:attribute name="renderDeleteAction" />
	<composite:attribute name="renderActionColumn" />
</composite:interface>

<composite:implementation>
	<p:panel id="#{cc.attrs.id}"
		header="#{cc.attrs.controller.entityName.toUpperCase()}">
		<h:panelGrid columns="2" style="width: 100%">
			<h:panelGroup>
				<p:inputText id="#{cc.attrs.id}SearchInput"
					value="#{cc.attrs.controller.searchTerm}"
					placeholder="Digite o termo..." />
				<p:commandButton value="Buscar"
					action="#{cc.attrs.controller.search}" icon="fa fa-search"
					ajax="true" process="@form" update="#{cc.attrs.id}Tbl"
					title="Procurar #{cc.attrs.controller.entityName}"
					style="margin-left: 5px;" />
			</h:panelGroup>
			<p:commandButton value="Novo #{cc.attrs.controller.entityName}"
				action="#{cc.attrs.controller.add}" icon="ui-icon-star"
				title="Criar novo #{cc.attrs.controller.entityName}"
				rendered="#{cc.attrs.renderAddBtn == null ? true : cc.attrs.renderAddBtn}"
				style="float: right;" />
		</h:panelGrid>
		<br />
		<p:dataTable id="#{cc.attrs.id}Tbl" var="item"
			value="#{cc.attrs.controller.lazyModel}" paginator="true"
			emptyMessage="Sem registros" paginatorPosition="bottom" rows="10"
			rowKey="index"
			paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
			lazy="true" rowsPerPageTemplate="10,25,50">
			<composite:insertChildren />
			<p:column width="100" style="text-align: center"
				rendered="#{cc.attrs.renderActionColumn == null ? true : cc.attrs.renderActionColumn}">
				<f:facet name="header">
					<h:outputText value="Ações" />
				</f:facet>
				<composite:renderFacet name="customAction" />
				<p:commandLink id="detailAction"
					action="#{cc.attrs.controller.detail(item)}"
					rendered="#{cc.attrs.renderDetailAction == null ? true : cc.attrs.renderDetailAction}"
					styleClass="action-link">
					<span class="fa fa-search" />
				</p:commandLink>
				<p:tooltip id="toolDetailAction" for="detailAction"
					value="Detalhar #{cc.attrs.controller.entityName}" />
				<span />
				<p:commandLink id="editAction"
					action="#{cc.attrs.controller.edit(item)}" styleClass="action-link"
					rendered="#{cc.attrs.renderEditAction == null ? true : cc.attrs.renderEditAction}">
					<span class="fa fa-pencil" />
				</p:commandLink>
				<p:tooltip id="toolEditAction" for="editAction"
					value="Editar #{cc.attrs.controller.entityName}" />
				<span />
				<p:commandLink id="deleteAction"
					action="#{cc.attrs.controller.preDelete(item.id, index)}"
					ajax="true" oncomplete="PF('deleteMdl').show();"
					rendered="#{cc.attrs.renderDeleteAction == null ? true : cc.attrs.renderDeleteAction}"
					styleClass="action-link">
					<span class="fa fa-trash" />
				</p:commandLink>
				<p:tooltip id="toolDeleteAction" for="deleteAction"
					value="Excluir #{cc.attrs.controller.entityName}" />
			</p:column>
		</p:dataTable>
	</p:panel>
	<p:dialog id="deleteMdl" header="Atenção" widgetVar="deleteMdl"
		modal="true">
		<h:outputText
			value="Você deseja realmente excluir o #{cc.attrs.controller.entityName}?" />
		<f:facet name="footer">
			<p:commandButton value="Excluir" ajax="true" update="@form"
				action="#{cc.attrs.controller.doDelete}"
				oncomplete="PF('deleteMdl').hide();" icon="fa fa-warning" />
			<p:commandButton value="Cancelar"
				oncomplete="PF('deleteMdl').hide();" icon="fa fa-arrow-left" />
		</f:facet>
	</p:dialog>
</composite:implementation>

</html>


